<div class="mypage-title"><%= @user.name %><span>さんのマイページ</span></div>
<div class="title2-container">
<div class="change-month"><%= link_to '←', user_path(id: params[:id], p: @x) %></div>
<div class="title2"><%= @this_year %>年<%= @this_month %>月</div>
<div class="change-month"><%= link_to '→', user_path(id: params[:id], n: @x) %></div>
</div>

<%= link_to posts_new_path, class: "add-data", method: :get do %><span>＋</span>スケジュールを追加<% end %>

<div class="calender-desc">-勤務予定-</div>

<table class="mypage-calender">
    <tr class="mypage-week">
      <td>日</td>
      <td>月</td>
      <td>火</td>
      <td>水</td>
      <td>木</td>
      <td>金</td>
      <td>土</td>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period2.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                    <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period3.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                    <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period4.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                    <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period5.each do |period| %>
            <% if x == period.wday %>
            <% if period.day >= 14 %>
                <%= period.day %>
                    <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <% if Random.rand(@week_period6).month == @this_month %>
    <tr>
        <% 7.times do |x| %>
            <td>
            <% @week_period6.each do |period| %> 
            <% if x == period.wday %>
            <%= period.day %> 
                <div class="mypage-details">
                    <% @posts[period.day].each do |post| %>
                        <%= link_to("/posts/#{post.id}") do %>
                        <div class="content-detail">
                        <p><span>現場名：</span><%= post.place %></p>
                        <p><span>備考：</span><%= post.desc %></p>
                        </div>
                        <div class="circle"></div>
                        <% end %>
                    <% end %>
                </div>
            <% end %>
            <% end %>
            </td>
        <% end %>
    </tr>
    <% end %>
</table>

<p class="separating-border"></p>

<%= link_to times_new_path, class: "add-data", method: :get do %><span>＋</span>打刻する<% end %>

<div class="calender-desc">-打刻履歴-</div>

<table class="mypage-calender">
    <tr class="mypage-week">
      <td>日</td>
      <td>月</td>
      <td>火</td>
      <td>水</td>
      <td>木</td>
      <td>金</td>
      <td>土</td>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                    </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period2.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                    </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period3.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                    </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period4.each do |period| %>
            <% if x == period.wday %>
                <%= period.day %>
                <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                    </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
                </div>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <tr>
        <% 7.times do |x| %>
        <td>
            <% @week_period5.each do |period| %>
            <% if x == period.wday %>
            <% if period.day >= 14 %>
                <%= period.day %>
                <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
                </div>
            <% end %>
            <% end %>
            <% end %>
        </td>
        <% end %>
    </tr>
    <% if Random.rand(@week_period6).month == @this_month %>
    <tr>
        <% 7.times do |x| %>
            <td>
            <% @week_period6.each do |period| %> 
            <% if x == period.wday %>
            <%= period.day %>
            <div class="mypage-details">
                <% @timestamps[period.day].each do |timestamp| %>
                    <%= link_to("/times/#{timestamp.id}") do %>
                    <div class="content-detail time">
                    <p><%= timestamp.start_time_h %>：<%= timestamp.start_time_m %></p>
                    <p class="to">〜</p>
                    <p><%= timestamp.finish_time_h %>：<%= timestamp.finish_time_m %></p>
                    </div>
                    <div class="circle"></div>
                    <% end %>
                <% end %>
            </div>
            <% end %>
            <% end %>
            </td>
        <% end %>
    </tr>
    <% end %>
</table>

<div class="title2-container">
<div class="change-month"><%= link_to '←', user_path(id: current_user.id, p: @x) %></div>
<div class="title2"><%= @this_year %>年<%= @this_month %>月</div>
<div class="change-month"><%= link_to '→', user_path(id: current_user.id, n: @x) %></div>
</div>